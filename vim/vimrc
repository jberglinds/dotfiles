" vim-plug plugins
call plug#begin('~/.vim/plugged')
Plug 'vim-airline/vim-airline'
Plug 'vim-airline/vim-airline-themes'
Plug 'rakr/vim-one'
Plug 'scrooloose/nerdtree'
Plug 'Valloric/YouCompleteMe'
Plug 'junegunn/fzf', { 'dir': '~/.fzf', 'do': './install --all' }
Plug 'junegunn/fzf.vim'
Plug 'tpope/vim-commentary'
Plug 'lyokha/vim-xkbswitch'
Plug 'sheerun/vim-polyglot'
Plug 'tpope/vim-surround'
Plug 'w0rp/ale'
Plug 'airblade/vim-gitgutter'
Plug 'zhaocai/goldenview.vim'
Plug 'mbbill/undotree'
Plug 'jiangmiao/auto-pairs'
Plug 'junegunn/rainbow_parentheses.vim'

" Language specific
Plug 'tpope/vim-fireplace', { 'for': 'clojure' }
call plug#end()

" Remap space key to leader
map <Space> \

" Filetype-specific indenting, syntax highlighting, omni-completion etc.
filetype plugin indent on

" Enable syntax highlighting
syntax on

" Allows matching with % on more than just ({[
runtime! macros/matchit.vim

" Automatic indenting for any filetype
set autoindent

" Better command-line completion
set wildmenu

" Show partial commands in the last line of the screen
set showcmd

" Highlight search hits
set hlsearch

" Search incrementally without pressing enter
set incsearch

" Use case insensitive search, except when using capital letters
set ignorecase
set smartcase

" Allow backspacing over autoindent, line breaks and a start of insert action
set backspace=indent,eol,start

" Display the cursor position on the last line or in the status line of window
set ruler

" Always display the status line
set laststatus=2

" Instead of failing command because of unsaved changes, raise a dialog to ask
" for save
set confirm

" Allow switching buffers without saving
set hidden

" Reload files with changes made elsewhere
set autoread

" Don't make a sound or flash when doing something wrong
set visualbell
set t_vb=

" Enable the mouse in all modes
" set mouse=a

" Disable arrow keys, for learning vim
noremap <Up> <NOP>
noremap <Down> <NOP>
noremap <Left> <NOP>
noremap <Right> <NOP>

" FZF search with ctrl p
map <c-p> :FZF<CR>

" Set the command window height to 2 lines, to avoid having to press enter in
" some cases
set cmdheight=2

" Display line-numbers on the left
set number
set relativenumber

" Indentation settings, use hard tabs - 4 spaces wide
set shiftwidth=4
set tabstop=4

" True color support in iTerm
if (empty($TMUX))
	if (has("termguicolors"))
		set termguicolors
	endif
endif

" Activate rainbow parentheses for lisps
augroup rainbow_lisp
  autocmd!
  autocmd FileType lisp,clojure,scheme RainbowParentheses
augroup END

" vim airline settings
let g:airline_theme='one'
let g:airline_powerline_fonts=1
let g:airline_extensions = ['tabline', 'ale']
let g:airline#extensions#tabline#enabled = 1
let g:airline#extensions#ale#enabled = 1
set ttimeoutlen=10

" Switch keyboards automatically between normal and insert
let g:XkbSwitchEnabled = 1
let g:XkbSwitchLib = '/usr/local/lib/libxkbswitch.dylib'

" Disable mappings for golden view by default and add the split mapping
let g:goldenview__enable_default_mapping = 0
nmap <silent> <C-L>  <Plug>GoldenViewSplit

" Search buffers with fzf
nmap <Leader>b :Buffers<CR>

" Theme settings, needs to be ordered like this
set termguicolors
set background=dark
colorscheme one

" Mark 80th column
set colorcolumn=80

